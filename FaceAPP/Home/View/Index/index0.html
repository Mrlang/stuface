<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>新生笑脸</title>
	<link rel="stylesheet" href="__PUBLIC__/css/style.css">

</head>
<body>
	<div id="container">
		<!-- 顶部 重邮Logo 登陆按钮 -->
		<div class="top-container">
			<div class="top">
				<img src="__PUBLIC__/img/school-logo.png" alt="">
				<ul class="nav">
					<li><a href="http://hongyan.cqupt.edu.cn/">红岩网校</a></li>
					<li><a href="http://hongyan.cqupt.edu.cn/welcome/2015/">2015新生专题网</a></li>
					<li><a href="http://hongyan.cqupt.edu.cn/aboutus/">关于我们</a></li>
					<li class="show-submit-box"><a>新生登陆</a></li>
				</ul>
			</div>
		</div>
		<!-- 内容 -->
		<div class="content">
			<!-- 上传按钮 -->
			<img src="__PUBLIC__/img/rocket.png" alt="">
			<div id="uploading">
				<img src="__PUBLIC__/img/stone.png" alt="">
			</div>
			<!-- 活动详情 -->
			<div class="activity-detail">
				<img src="__PUBLIC__/img/活动详情.png" alt="">
				<div class="activity-content">
					<div class="cqupt-helper">
						<img src="__PUBLIC__/img/cqupt-helper.png" alt="">
					</div>
					
					<div class="about-activity">
						<p><span class="activity-time">活动时间：</span>本次线上参与活动时间为<span class="activity-detime">9月8日8：00——9月16日12：00</span></p>
						<p class="about-people"><span class="activity-people">活动对象：</span><span class="student-2015">2015级</span>所有小鲜肉</p>
						<p class="activity-way">参与方式</p>
						<p>方式一：上传自己的“笑脸”照片（每人限一张）参与活动。</p>
						<p>方式二：9月9日至10日在雨红莲操场和风雨操场参与拍照活动。</p>
						<p class="pic-content">照片内容：“笑脸”照片可以是新生自己和各大重邮建筑合照。</p>
						<p class="career-talk">红岩网校工作站招新宣讲会</p>
						<p class="career-show">9月19日晚上19：00 将会展示最美笑脸</p>
					</div>
				</div>
				
			</div>
			<!-- 笑脸展示 -->
			<div class="smile-face">
				<img src="__PUBLIC__/img/笑脸展示.png" alt="">
				<div>
					<div class="select-condition">
						<div class="condition-left">
							<div class="select-inf select-left" id="inf01">
								<div class="option frist" id="con01">综合</div>
								<div class="option">综合</div>
								<div class="option">人气</div>
								<div class="option">最新</div>
							</div>
							<div class="select-inf" id="inf02">
								<div class="option frist" id="con02">全部</div>
								<div class="option">全部</div>
								<div class="option">汉子</div>
								<div class="option">妹子</div>
							</div>
						</div>
						<div class="condition-right">
							<input type="text" placeholder="输入笑脸编号">
							<img src="__PUBLIC__/img/搜索按钮.png" alt="" class="search">
						</div>
					</div>
					<div class="smile-face-photo">
						<div class="one-row">
							
						</div>
						
						
					</div>
					<!-- 翻页 -->
					<div class="page-outer">
						<ul class="page">
							<li><</li>
							<li class="cur-li">1</li>
							<li>2</li>
							<li>3</li>
							<li>4</li>
							<li>5</li>
							<li>></li>
						</ul>
					</div>
				</div>
			</div>
			<!-- 回到顶部 -->
			<div class="toTop">
				<img src="__PUBLIC__/img/toTop.png" alt="">
			</div>
			<!-- 声明信息 -->
			<div class="foot">
				<a href="">关于红岩网校</a>
				<span>|</span>
				<a href="">网站地图</a>
				<span>|</span>
				<a href="">指出错误</a>
				<span>|</span>
				<a href="">管理入口</a>
				<span>|</span>
				<p>本网站由红岩网校工作站负责开发，管理，不经红岩网校委员会书面同意，不得进行转载</p>
				<p>地址：重庆市南岸区崇文路2号（重庆邮电大学内） 400065 E-mail :redrock@cqupt.edu.cn (023-62461084)</p>
			</div>
		</div>
		<!-- 登陆窗口 -->
		<div class="submit-boxing"></div>
		<div class="submit-box">
			<form action="">
				<input type="text" class="name" placeholder="请输入学号">
				<img src="__PUBLIC__/img/name.png" alt="" class="usrname">
				<img src="__PUBLIC__/img/dividing.png" alt="" class="name-dividing">
				<input type="text" class="password" placeholder="身份证后六位">
				<img src="__PUBLIC__/img/password.png" alt="" class="usrpwd">
				<img src="__PUBLIC__/img/dividing.png" alt="" class="pwd-dividing"><br>
			</form>
			<a class="submit">登陆</a>
			
		</div>
		<!-- 照片上传窗口 -->
		<div class="submit-boxing"></div>
		<div class="uploading-box">
			<div class="uploading-pic-box">
				<input type="file" class="add-in-file">
				<img src="__PUBLIC__/img/add-in.png" alt="" class="add-in">
			</div>
			<span>手机号：</span>
			<input type="text">
			<span class="important">*</span>
			<p>我们不会透露你的联系方式</p>
			<a class="hand-in">发布</a>
		</div>
		<!-- 照片上传成功窗口 -->
		<div class="submit-boxing"></div>
		<div class="uploading-success-box">
			<img src="__PUBLIC__/img/push-sucess.png" alt="" class="success-icon">
			<p>关注重邮小帮手（微信号：cyxbswx）并绑定学号，我们将审核结果推送给你</p>
			<img src="__PUBLIC__/img/cqupt-helper.png" alt="" class="cqupt-helper">
			<img src="__PUBLIC__/img/确认.png" alt="" class="confirm">
		</div>
		<!-- 查看详情 -->
		<div class="submit-boxing"></div>
		<div class="detail-box">
			<span class="ranking">top1</span>
			<div class="person-img">
				<img src="__PUBLIC__/img/person.png" alt="">
			</div>
			<span class="smile-id">笑脸编号:28</span>
			<div class="love">
				<img src="__PUBLIC__/img/love.png" alt="">
				<span class="love-people">27</span>
			</div>
			
			
		</div>
	</div>
	<script src="__PUBLIC__/js/jQuery.js"></script>
	<script src="__PUBLIC__/js/api.js"></script>
	<script>
		function page (container,footer) {
			$.get("<{:U('Home/Index/get_page')}>", "fetchpage=1", function (data) {
				var page_length = data,
					focus = $(footer[1]),
					focusNum = 1,
					i,
					j,
					res;
				function display (button_val) {
					var button_val = parseInt(button_val) || 1;
					get(button_val);
					if(button_val == 1 || button_val == page_length){
						if(button_val == 1){
							$(footer[0]).css('display',"none");
							$(footer[6]).css('display',"block");
						}else{
							$(footer[6]).css('display',"none");
							$(footer[0]).css('display',"block");
						}
						if(button_val ==1 && button_val == page_length){
							$(footer[0]).css('display',"none");
							$(footer[6]).css('display',"none");
						}
					}else{
						$(footer[0]).css('display',"block");
						$(footer[6]).css('display',"block");
					}
					focusNum = button_val;
					if(button_val <= 3 || button_val >= page_length - 2){
						if(button_val <= 3){
							for(i = 1;i < 6;i++,j++){
								if(i <= page_length){
									$(footer[i]).css('display',"block")
										.html(i);
									if(i == button_val){
										focus.removeClass("cur-li");
										$(footer[i]).addClass("cur-li");
										focus = $(footer[i]);
									}
								}else{
									$(footer[i]).css('display',"none");
								}
							}
						}else{
							for(i = page_length - 4,j = 1;i <= page_length;i++,j++){
								if(i > 0){
									$(footer[j]).css('display',"block")
										.html(i);
									if(i == button_val){
										focus.removeClass("cur-li");
										$(footer[j]).addClass("cur-li");
										focus = $(footer[j]);
									}
								}else{
									$(footer[j]).css('display',"none");
								}
							}
						}
					}else{
						for(i = button_val - 2,j = 1;i <= button_val + 2;i++,j++){
							$(footer[j]).css('display',"block")
								.html(i);
							if(i == button_val){
								focus.removeClass("cur-li");
								$(footer[j]).addClass("cur-li");
								focus = $(footer[j]);
							}
						}
					}
				}
				function addlisten(){
					$(".page").css('margin-left',(1018 - parseFloat($(".page").width()))/2);
					footer.click(function () {
						if($(this).text() == "<"){
							display(focusNum - 1);
						}else if($(this).text() == ">"){
							display(focusNum + 1);
						}else{
							display($(this).text());
						}
						$(".page").css('margin-left',(1018 - parseFloat($(".page").width()))/2);
						
					})
				}
				function get(button_val){
					$.post("<{:U('Index/get_pic')}>","btn=" + button_val,function (data) {
						showData(data);
					})
				}
				function showData(data){
					container.html("");
					var obj = {
						"class_name":"",
						"id":"1",
						"pic":"55e6af2907944.jpg",
						"big_pic":"55e6af2907944_big.jpg",
						"uid":"2014211",
						"vote":"0000000001",
						"time":"2015-09-01 20:02:48",
						"sex":null,
						"phone":null
					},
						i,
						key;
					for(i = 0;i < data.length;i++){
						for(key in data[i]){
							obj[key] = data[i][key];
						}
						obj.vote = parseInt(obj.vote);
						if(i%4 == 0){
							obj.class_name = "no-margin";
						}else{
							obj.class_name = "";
						}
						oDiv = '<div top=' + obj.id + ' vote=' + obj.vote　+ ' uid=' + obj.uid + ' big-pic=' + obj.big_pic +' class="speciel ' + obj.class_name +'"><span class="ranking">'+"top" + obj.id +'</span><div class="person-img"><img src="__PUBLIC__/allimage/'+ obj.pic +'" alt=""></div><img src="__PUBLIC__/img/love.png" alt="" class="love-nolove"><span class="love-people">'+ obj.vote +'</span><img class="detail" src="__PUBLIC__/img/详情.png" alt=""></div>';
						container.append(oDiv);
					}
				}
				display();
				addlisten();
			})
		}
		function changeSort () {		
			$("#inf01").children().click(function (e) {
				$("#con01").html($(this).html());
				$.get("<{:U('Index/get_pic')}>","limit=" + $(this).text(),function (data) {
					page($(".one-row"),$(".page li"));
					$(".page li").removeClass("cur-li");
				});
			})
			$("#inf02").children().click(function (e) {
				$("#con02").html($(this).html());
				$.get("<{:U('Index/get_pic')}>","sex=" + $(this).text(),function (data) {
					page($(".one-row"),$(".page li"));
					$(".page li").removeClass("cur-li");
				});
			})
		}
		changeSort();
		page($(".one-row"),$(".page li"));
		function login(){
			var name,
				pass,
				name_input = $(".name"),
				pass_input = $(".password");
			$.get("<{:U('Index/checklog')}>","",function (res) {
				if(res){

				}else{

				}
			})
			$(".submit").click(function () {
				name = name_input.val();
				password = pass_input.val();
				$.post("<{:U('Index/log')}>","username=" + name + "&&password=" + password,function (res) {
					if(res){
						alert("登录成功");
					}else{
						alert("账号密码错误");
					}
				})
			})
		}
		login();
	</script>
</body>
</html>